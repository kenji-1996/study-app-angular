<nb-card size="xlarge" [@fadeInOut]>
    <nb-card-header>
        Authored Tests
    </nb-card-header>
    <nb-card-body [@fadeInOut]>
        <div class="row" *ngIf="tests" >
            <div *ngFor="let t of tests" class="col-lg-12" [@fadeInOut]>
                <nb-card style="max-height: 800px;">
                    <nb-card-header>{{t.title | uppercase}} TEST</nb-card-header>
                    <nb-card-body *ngIf="t.userTestList.length > 0">
                        <div *ngFor="let sub of t.userTestList" style="cursor: pointer;">
                            <h5>{{sub.user.name}} <span class="text-muted" style="font-size:small">{{sub.user._id}}</span></h5>
                            <span class="text-muted" style="font-size: small">
                                <div class="row text-center">
                                    <div class="col-sm-4">
                                        <strong>ID:</strong> {{sub._id}}
                                    </div>
                                    <div class="col-sm-4">
                                        <strong>Allocated:</strong> {{sub.allocatedDate | date:'shortDate'}}
                                    </div>
                                    <div class="col-sm-4">
                                        <strong>Attempts:</strong> {{sub.submittedTests.length}}
                                    </div>

                                </div>
                                <div class="row text-center">
                                    <div class="col-sm-4">
                                        <strong>Final mark:</strong>
                                        <ng-container *ngIf="sub.finalMark">{{sub.finalMark}}</ng-container>
                                        <ng-container *ngIf="!sub.finalMark">Provide mark</ng-container>
                                    </div>
                                    <div class="col-sm-4">
                                        <strong>Feedback:</strong>
                                        <ng-container *ngIf="sub.feedback">{{sub.feedback}}</ng-container>
                                        <ng-container *ngIf="!sub.feedback">Provide feedback</ng-container>
                                    </div>
                                </div>
                            </span>
                            <div class="dotted-hr"></div>
                        </div>
                    </nb-card-body>
                    <nb-card-footer>
                        <nb-actions size="medium" fullWidth>
                            <nb-action>
                                <span (click)="assignUserID(t,{'UserID': ''})" style="cursor: pointer"><i class="nb-paper-plane"></i>Assign</span>
                            </nb-action>
                            <nb-action>
                                <span style="cursor: pointer"><i class="nb-locked"></i>Lock</span>
                            </nb-action>
                            <nb-action>
                                <span style="cursor: pointer"><i class="nb-edit"></i>Edit</span>
                            </nb-action>
                        </nb-actions>
                    </nb-card-footer>
                </nb-card>
            </div>
        </div>
    </nb-card-body>
    <nb-card-footer>
        <nb-actions size="medium" fullWidth>
            <nb-action>
                <i class="nb-search"></i><span>Search</span>
            </nb-action>
            <nb-action>
                <span ><i class="nb-plus"></i>Add</span>
            </nb-action>
        </nb-actions>
    </nb-card-footer>
</nb-card>